C51 COMPILER V9.60.0.0   LCD1602                                                           12/07/2024 17:48:00 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN LCD1602.OBJ
COMPILER INVOKED BY: C:\Program Files\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<reg51.h>
   2          #include<intrins.h>
   3          
   4          #define INT8U unsigned char
   5          #define INT16U unsigned int
   6          
   7          // 2*16 char
   8          
   9          sbit RS=P2^0;
  10          sbit RW=P2^1;
  11          sbit EN=P2^2;
  12          
  13          void delay_ms(INT16U x)
  14          {
  15   1        INT8U i;
  16   1        while(x--)
  17   1        {
  18   2          for(i=0;i<120;i++);
  19   2        }
  20   1      }
  21          
  22          void Busy_Wait()
  23          {
  24   1        INT8U LCD_Status;
  25   1        do
  26   1        {
  27   2          P0=0xFF;
  28   2          EN=0;RS=0;RW=1;
  29   2          EN=1; LCD_Status=P0;
  30   2          EN=0;
  31   2        }
  32   1        while(LCD_Status&0x80);//1000 0000
  33   1      }
  34          
  35          void Write_LCD_Command(INT8U cmd)
  36          {
  37   1        Busy_Wait();
  38   1        EN=0;RS=0;RW=0;
  39   1        P0=cmd;
  40   1        EN=1;_nop_();EN=0;
  41   1      
  42   1      }
  43          
  44          void Write_LCD_Data(INT8U data1)
  45          {
  46   1        Busy_Wait();
  47   1        EN=0;RS=1;RW=0;
  48   1        P0=data1;
  49   1        EN=1;_nop_();EN=0;
  50   1      }
  51          
  52          void LCD_String(INT8U r,INT8U c,INT8U *str)
  53          {
  54   1        INT8U i=0;
  55   1        INT8U code DDRAM[]={0x80,0xC0};
C51 COMPILER V9.60.0.0   LCD1602                                                           12/07/2024 17:48:00 PAGE 2   

  56   1        Write_LCD_Command(DDRAM[r]|c);
  57   1        for(i=0;i<16&&str[i];i++)
  58   1        {
  59   2          Write_LCD_Data(str[i]);
  60   2        }
  61   1        for(;i<16;i++)
  62   1          Write_LCD_Data(' ');
  63   1      }
  64          
  65          void LCD_Initialize()
  66          {
  67   1        Write_LCD_Command(0x38); delay_ms(1);//置功能位，8位，双行，每一个字符占5*7
  68   1        Write_LCD_Command(0x01); delay_ms(1);//清屏 
  69   1        Write_LCD_Command(0x06); delay_ms(1);//字符进入模式，屏幕不动，字符后移
  70   1        Write_LCD_Command(0x0C); delay_ms(1);//开显示，关光标
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    188    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
